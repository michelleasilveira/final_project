{
  "hash": "c4060df5dce03cf361c86be1d8f4d15d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Diabetes Health Indicators – Exploratory Data Analysis\"\nauthor: \"Michelle A Silveira\"\nformat:\n  html:\n    toc: true\n    toc-location: left\n    theme: cosmo\neditor: visual\n---\n\n## Introduction\n\nThe data analyzed in this report come from the **Diabetes Health Indicators** dataset\\\n(`diabetes_binary_health_indicators_BRFSS2015`). Each row corresponds to a survey respondent and includes a diabetes status indicator (`Diabetes_012`), along with a variety of health and lifestyle indicators such as blood pressure, BMI, physical activity, smoking status, general health, and socio-demographic variables.\n\nIn this version of the dataset, the variable:\n\n-   `Diabetes_012` is coded as:\n    -   `0` = no diabetes\n    -   `1` = prediabetes\n    -   `2` = diabetes\n\nOur goals in this EDA are to:\n\n-   Describe the variables that will be used in the subsequent modeling.\n-   Understand the distribution of the **response** variable (`Diabetes_012`).\n-   Explore how key predictors relate to diabetes status.\n-   Identify potential data quality issues (missing values, unusual distributions).\n-   Build intuition that will guide model selection in the Modeling document.\n\nThe **ultimate goal** is to build a predictive model related to diabetes status, which will be developed in the modeling page/report.\n\n------------------------------------------------------------------------\n\n## Load Packages\n\nWe begin by loading the R packages that will be used throughout the analysis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(janitor)\nlibrary(skimr)\nlibrary(GGally)\n\ntheme_set(theme_minimal())\n```\n:::\n\n------------------------------------------------------------------------\n\n## Read and Prepare the Data\n\nNext, we read the dataset from the `data/` folder and perform some initial cleaning steps (I know from Kaggle this is the cleaned sample). We keep a numeric version of the diabetes indicator for correlations, create a factor version for plots/modeling, recode `Sex` as a labeled factor, and provide more interpretable labels for `GenHlth` and `Age`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiabetes_raw <- readr::read_csv(\n  \"data/diabetes_binary_health_indicators_BRFSS2015.csv\"\n)\n\nage_labels <- c(\n  \"18–24\", \"25–29\", \"30–34\", \"35–39\",\n  \"40–44\", \"45–49\", \"50–54\", \"55–59\",\n  \"60–64\", \"65–69\", \"70–74\", \"75–79\", \"80+\"\n)\n\ndiabetes <- diabetes_raw |>\n  mutate(\n    # numeric copy of the diabetes indicator\n    Diabetes_num = Diabetes_012,\n    # factor version for classification / plots\n    Diabetes_012 = factor(\n      Diabetes_012,\n      levels = c(0, 1, 2),\n      labels = c(\"No_diabetes\", \"Prediabetes\", \"Diabetes\")\n    ),\n    Sex = factor(\n      Sex,\n      levels = c(0, 1),\n      labels = c(\"Female\", \"Male\")\n    ),\n    GenHlth = factor(\n      GenHlth,\n      levels = 1:5,\n      labels = c(\"Excellent\", \"Very_good\", \"Good\", \"Fair\", \"Poor\"),\n      ordered = TRUE\n    ),\n    Age_num = Age,\n    Age = factor(\n      Age,\n      levels = 1:13,\n      labels = age_labels,\n      ordered = TRUE\n    )\n  )\n\ndiabetes\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 253,680 × 24\n   Diabetes_012 HighBP HighChol CholCheck   BMI Smoker Stroke\n   <fct>         <dbl>    <dbl>     <dbl> <dbl>  <dbl>  <dbl>\n 1 No_diabetes       1        1         1    40      1      0\n 2 No_diabetes       0        0         0    25      1      0\n 3 No_diabetes       1        1         1    28      0      0\n 4 No_diabetes       1        0         1    27      0      0\n 5 No_diabetes       1        1         1    24      0      0\n 6 No_diabetes       1        1         1    25      1      0\n 7 No_diabetes       1        0         1    30      1      0\n 8 No_diabetes       1        1         1    25      1      0\n 9 Diabetes          1        1         1    30      1      0\n10 No_diabetes       0        0         1    24      0      0\n# ℹ 253,670 more rows\n# ℹ 17 more variables: HeartDiseaseorAttack <dbl>, PhysActivity <dbl>,\n#   Fruits <dbl>, Veggies <dbl>, HvyAlcoholConsump <dbl>, AnyHealthcare <dbl>,\n#   NoDocbcCost <dbl>, GenHlth <ord>, MentHlth <dbl>, PhysHlth <dbl>,\n#   DiffWalk <dbl>, Sex <fct>, Age <ord>, Education <dbl>, Income <dbl>,\n#   Diabetes_num <dbl>, Age_num <dbl>\n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Basic Data Overview\n\nWe first report the number of observations and variables in the cleaned dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_obs  <- nrow(diabetes)\nn_vars <- ncol(diabetes)\n\ntibble(\n  n_observations = n_obs,\n  n_variables    = n_vars\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n  n_observations n_variables\n           <int>       <int>\n1         253680          24\n```\n\n\n:::\n:::\n\n\nWe then use `skimr::skim()` to obtain a high-level summary of the distributions and types of all variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nskimr::skim(diabetes)\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |         |\n|:------------------------|:--------|\n|Name                     |diabetes |\n|Number of rows           |253680   |\n|Number of columns        |24       |\n|_______________________  |         |\n|Column type frequency:   |         |\n|factor                   |4        |\n|numeric                  |20       |\n|________________________ |         |\n|Group variables          |None     |\n\n\n**Variable type: factor**\n\n|skim_variable | n_missing| complete_rate|ordered | n_unique|top_counts                                     |\n|:-------------|---------:|-------------:|:-------|--------:|:----------------------------------------------|\n|Diabetes_012  |         0|             1|FALSE   |        3|No_: 213703, Dia: 35346, Pre: 4631             |\n|GenHlth       |         0|             1|TRUE    |        5|Ver: 89084, Goo: 75646, Exc: 45299, Fai: 31570 |\n|Sex           |         0|             1|FALSE   |        2|Fem: 141974, Mal: 111706                       |\n|Age           |         0|             1|TRUE    |       13|60–: 33244, 65–: 32194, 55–: 30832, 50–: 26314 |\n\n\n**Variable type: numeric**\n\n|skim_variable        | n_missing| complete_rate|  mean|   sd| p0| p25| p50| p75| p100|hist  |\n|:--------------------|---------:|-------------:|-----:|----:|--:|---:|---:|---:|----:|:-----|\n|HighBP               |         0|             1|  0.43| 0.49|  0|   0|   0|   1|    1|▇▁▁▁▆ |\n|HighChol             |         0|             1|  0.42| 0.49|  0|   0|   0|   1|    1|▇▁▁▁▆ |\n|CholCheck            |         0|             1|  0.96| 0.19|  0|   1|   1|   1|    1|▁▁▁▁▇ |\n|BMI                  |         0|             1| 28.38| 6.61| 12|  24|  27|  31|   98|▇▅▁▁▁ |\n|Smoker               |         0|             1|  0.44| 0.50|  0|   0|   0|   1|    1|▇▁▁▁▆ |\n|Stroke               |         0|             1|  0.04| 0.20|  0|   0|   0|   0|    1|▇▁▁▁▁ |\n|HeartDiseaseorAttack |         0|             1|  0.09| 0.29|  0|   0|   0|   0|    1|▇▁▁▁▁ |\n|PhysActivity         |         0|             1|  0.76| 0.43|  0|   1|   1|   1|    1|▂▁▁▁▇ |\n|Fruits               |         0|             1|  0.63| 0.48|  0|   0|   1|   1|    1|▅▁▁▁▇ |\n|Veggies              |         0|             1|  0.81| 0.39|  0|   1|   1|   1|    1|▂▁▁▁▇ |\n|HvyAlcoholConsump    |         0|             1|  0.06| 0.23|  0|   0|   0|   0|    1|▇▁▁▁▁ |\n|AnyHealthcare        |         0|             1|  0.95| 0.22|  0|   1|   1|   1|    1|▁▁▁▁▇ |\n|NoDocbcCost          |         0|             1|  0.08| 0.28|  0|   0|   0|   0|    1|▇▁▁▁▁ |\n|MentHlth             |         0|             1|  3.18| 7.41|  0|   0|   0|   2|   30|▇▁▁▁▁ |\n|PhysHlth             |         0|             1|  4.24| 8.72|  0|   0|   0|   3|   30|▇▁▁▁▁ |\n|DiffWalk             |         0|             1|  0.17| 0.37|  0|   0|   0|   0|    1|▇▁▁▁▂ |\n|Education            |         0|             1|  5.05| 0.99|  1|   4|   5|   6|    6|▁▁▅▅▇ |\n|Income               |         0|             1|  6.05| 2.07|  1|   5|   7|   8|    8|▁▁▃▂▇ |\n|Diabetes_num         |         0|             1|  0.30| 0.70|  0|   0|   0|   0|    2|▇▁▁▁▁ |\n|Age_num              |         0|             1|  8.03| 3.05|  1|   6|   8|  10|   13|▂▃▇▇▆ |\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Variables of Interest\n\nFor this project, we focus on a subset of predictors that are both interpretable and likely to be informative for predicting diabetes status. Here we select these variables and inspect their structure.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvars_of_interest <- diabetes |>\n  select(\n    Diabetes_012,\n    HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,\n    HeartDiseaseorAttack, PhysActivity, Fruits, Veggies,\n    HvyAlcoholConsump, AnyHealthcare, NoDocbcCost,\n    GenHlth, MentHlth, PhysHlth, DiffWalk,\n    Sex, Age, Age_num, Education, Income,\n    Diabetes_num\n  )\n\nglimpse(vars_of_interest)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 253,680\nColumns: 24\n$ Diabetes_012         <fct> No_diabetes, No_diabetes, No_diabetes, No_diabete…\n$ HighBP               <dbl> 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1…\n$ HighChol             <dbl> 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1…\n$ CholCheck            <dbl> 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ BMI                  <dbl> 40, 25, 28, 27, 24, 25, 30, 25, 30, 24, 25, 34, 2…\n$ Smoker               <dbl> 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0…\n$ Stroke               <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n$ HeartDiseaseorAttack <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0…\n$ PhysActivity         <dbl> 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1…\n$ Fruits               <dbl> 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1…\n$ Veggies              <dbl> 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1…\n$ HvyAlcoholConsump    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ AnyHealthcare        <dbl> 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ NoDocbcCost          <dbl> 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…\n$ GenHlth              <ord> Poor, Good, Poor, Very_good, Very_good, Very_good…\n$ MentHlth             <dbl> 18, 0, 30, 0, 3, 0, 0, 0, 30, 0, 0, 0, 0, 0, 30, …\n$ PhysHlth             <dbl> 15, 0, 30, 0, 0, 2, 14, 0, 30, 0, 0, 30, 15, 0, 2…\n$ DiffWalk             <dbl> 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0…\n$ Sex                  <fct> Female, Female, Female, Female, Female, Male, Fem…\n$ Age                  <ord> 60–64, 50–54, 60–64, 70–74, 70–74, 65–69, 60–64, …\n$ Age_num              <dbl> 9, 7, 9, 11, 11, 10, 9, 11, 9, 8, 13, 10, 7, 11, …\n$ Education            <dbl> 4, 6, 4, 3, 5, 6, 6, 4, 5, 4, 6, 5, 5, 4, 6, 6, 4…\n$ Income               <dbl> 3, 1, 8, 6, 4, 8, 7, 4, 1, 3, 8, 1, 7, 6, 2, 8, 3…\n$ Diabetes_num         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 0, 2, 0, 0, 0…\n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Missing Data\n\nBefore proceeding with the analysis, we investigate the extent of missing data for each selected variable. First, we summarize the number and proportion of missing values by variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmissing_summary <- vars_of_interest |>\n  select(-Diabetes_num, -Age_num) |>\n  summarise(across(everything(), ~ sum(is.na(.)))) |>\n  pivot_longer(everything(),\n               names_to = \"variable\",\n               values_to = \"n_missing\") |>\n  mutate(prop_missing = n_missing / n_obs)\n\nmissing_summary |>\n  arrange(desc(n_missing)) |> \n  head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 3\n   variable             n_missing prop_missing\n   <chr>                    <int>        <dbl>\n 1 Diabetes_012                 0            0\n 2 HighBP                       0            0\n 3 HighChol                     0            0\n 4 CholCheck                    0            0\n 5 BMI                          0            0\n 6 Smoker                       0            0\n 7 Stroke                       0            0\n 8 HeartDiseaseorAttack         0            0\n 9 PhysActivity                 0            0\n10 Fruits                       0            0\n```\n\n\n:::\n:::\n\n\nWe then visualize the proportion of missing values among variables that have at least one missing observation. If there are no missing values, we simply print a message indicating that the data are complete.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (any(missing_summary$n_missing > 0)) {\n  missing_summary |>\n    filter(n_missing > 0) |>\n    ggplot(aes(x = reorder(variable, prop_missing),\n               y = prop_missing)) +\n    geom_col() +\n    coord_flip() +\n    scale_y_continuous(labels = scales::percent_format()) +\n    labs(\n      x = NULL,\n      y = \"Proportion Missing\",\n      title = \"Proportion of Missing Values by Variable\"\n    )\n} else {\n  tibble(msg = \"No missing values were found in the selected variables.\") |>\n    knitr::kable()\n}\n```\n\n::: {.cell-output-display}\n\n\n|msg                                                     |\n|:-------------------------------------------------------|\n|No missing values were found in the selected variables. |\n\n\n:::\n:::\n\n\n*This is the cleaned dataset explained in the Kaggle, so I was not expecting any missing value.*\n\n------------------------------------------------------------------------\n\n## Distribution of the Response: `Diabetes_012`\n\nWe next examine the distribution of the diabetes status indicator to understand class balance across the three categories.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresp_counts <- vars_of_interest |>\n  count(Diabetes_012) |>\n  mutate(prop = n / sum(n))\n\nresp_counts\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 3\n  Diabetes_012      n   prop\n  <fct>         <int>  <dbl>\n1 No_diabetes  213703 0.842 \n2 Prediabetes    4631 0.0183\n3 Diabetes      35346 0.139 \n```\n\n\n:::\n:::\n\n\nWe visualize these proportions with a bar plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresp_counts |>\n  ggplot(aes(x = Diabetes_012, y = prop, fill = Diabetes_012)) +\n  geom_col(show.legend = FALSE) +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    x = \"Diabetes Status\",\n    y = \"Proportion of Respondents\",\n    title = \"Prevalence of Diabetes Status in the Sample\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/response-barplot-1.png){width=576}\n:::\n:::\n\n\n*The dataset is imbalanced, with a smaller proportion of respondents labeled as diabetes compared to those without diabetes. Prediabetes appears as an intermediate category. This imbalance will be important to considerwhen evaluating models. This was mentioned in the Kaggle website*\n\n------------------------------------------------------------------------\n\n## Univariate Distributions of Key Numeric Predictors\n\nWe begin by studying the distributions of some important numeric variables: BMI, days of poor mental health, and days of poor physical health.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvars_of_interest |>\n  select(BMI, MentHlth, PhysHlth) |>\n  pivot_longer(everything(), names_to = \"variable\", values_to = \"value\") |>\n  ggplot(aes(x = value)) +\n  geom_histogram(bins = 30) +\n  facet_wrap(~ variable, scales = \"free_x\") +\n  labs(\n    x = NULL,\n    y = \"Count\",\n    title = \"Distributions of Selected Numeric Predictors\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/numeric-distributions-1.png){width=768}\n:::\n:::\n\n\n*BMI usually right-skewed, with most values in the 20–40 range. Mental and physical health days are often concentrated at 0, with a long right tail for respondents reporting many days of poor health.*\n\n------------------------------------------------------------------------\n\n## Univariate Distributions of Key Binary/Categorical Predictors\n\nMany predictors in this dataset are Dummy or 0/1 indicators. Here I examine the marginal distributions for a few key binary variables, followed by a separate summary of the sex variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat_vars <- vars_of_interest |>\n  select(HighBP, HighChol, Smoker, PhysActivity,\n         Fruits, Veggies, DiffWalk)\n\ncat_vars |>\n  pivot_longer(everything(),\n               names_to = \"variable\",\n               values_to = \"value\") |>\n  mutate(value = factor(value)) |>\n  group_by(variable, value) |>\n  summarise(n = n(), .groups = \"drop\") |>\n  group_by(variable) |>\n  mutate(prop = n / sum(n)) |>\n  ggplot(aes(x = value, y = prop, fill = value)) +\n  geom_col(show.legend = FALSE) +\n  facet_wrap(~ variable, scales = \"free_x\") +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    x = NULL,\n    y = \"Proportion\",\n    title = \"Distributions of Selected Binary Predictors\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/categorical-marginals-1.png){width=768}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvars_of_interest |>\n  count(Sex) |>\n  mutate(prop = n / sum(n)) |>\n  ggplot(aes(x = Sex, y = prop, fill = Sex)) +\n  geom_col(show.legend = FALSE) +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    x = \"Sex\",\n    y = \"Proportion\",\n    title = \"Distribution of Sex\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/sex-marginal-1.png){width=576}\n:::\n:::\n\n\n*These plots show the prevalence of high blood pressure, high cholesterol, smoking, physical activity, difficulty walking, and sex in the sample.*\n\n------------------------------------------------------------------------\n\n## Numeric Predictors vs. Diabetes Status\n\nWe now turn to bivariate relationships. First, we compare BMI, mental health days, and physical health days across diabetes status groups using boxplots.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvars_of_interest |>\n  select(Diabetes_012, BMI, MentHlth, PhysHlth) |>\n  pivot_longer(cols = c(BMI, MentHlth, PhysHlth),\n               names_to = \"variable\",\n               values_to = \"value\") |>\n  ggplot(aes(x = Diabetes_012, y = value, fill = Diabetes_012)) +\n  geom_boxplot(outlier.alpha = 0.2, show.legend = FALSE) +\n  facet_wrap(~ variable, scales = \"free_y\") +\n  labs(\n    x = \"Diabetes Status\",\n    y = NULL,\n    title = \"Numeric Predictors by Diabetes Status\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/numeric-vs-diabetes-1.png){width=960}\n:::\n:::\n\n\n*Respondents with diabetes tend to have higher BMI and more days of poor physical health. Differences in mental health days may also be present but could be less pronounced.*\n\n------------------------------------------------------------------------\n\n## Binary Predictors vs. Diabetes Status\n\nFor binary predictors, we compare the proportion of “1” (Yes) within each diabetes group.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbinary_vars <- vars_of_interest |>\n  select(Diabetes_012,\n         HighBP, HighChol, Smoker, PhysActivity,\n         Fruits, Veggies, DiffWalk)\n\nbinary_long <- binary_vars |>\n  pivot_longer(\n    cols = -Diabetes_012,\n    names_to = \"variable\",\n    values_to = \"value\"\n  ) |>\n  mutate(value = factor(value))\n\nbinary_long |>\n  group_by(Diabetes_012, variable) |>\n  summarise(prop_yes = mean(value == \"1\"), .groups = \"drop\") |>\n  ggplot(aes(x = variable, y = prop_yes,\n             fill = Diabetes_012)) +\n  geom_col(position = \"dodge\") +\n  coord_flip() +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    x = NULL,\n    y = \"Proportion with value = 1\",\n    fill = \"Diabetes status\",\n    title = \"Proportion of 'Yes' for Binary Predictors by Diabetes Status\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/binary-vs-diabetes-1.png){width=864}\n:::\n:::\n\n\n*Individuals with diabetes are more likely to report high blood pressure, high cholesterol, difficulty walking, and lower levels of physical activity. These patterns support the inclusion of these predictors in our models.*\n\n------------------------------------------------------------------------\n\n## Ordinal Predictors vs. Diabetes Status\n\nWe now investigate how self-reported general health (`GenHlth`), age category, education, and income differ by diabetes status.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nordinal_vars <- vars_of_interest |>\n  select(Diabetes_012, GenHlth, Age, Education, Income) |>\n  # make all ordinal predictors character so pivot_longer is happy\n  mutate(across(c(GenHlth, Age, Education, Income), as.character))\n\nordinal_long <- ordinal_vars |>\n  pivot_longer(\n    cols = -Diabetes_012,\n    names_to = \"variable\",\n    values_to = \"value\"\n  )\n\nordinal_long |>\n  group_by(Diabetes_012, variable, value) |>\n  summarise(n = n(), .groups = \"drop\") |>\n  group_by(Diabetes_012, variable) |>\n  mutate(prop = n / sum(n)) |>\n  ggplot(aes(x = value, y = prop,\n             fill = Diabetes_012)) +\n  geom_col(position = \"dodge\") +\n  facet_wrap(~ variable, scales = \"free_x\") +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    x = \"Category\",\n    y = \"Proportion\",\n    fill = \"Diabetes status\",\n    title = \"Ordinal Predictors by Diabetes Status\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/ordinal-vs-diabetes-1.png){width=864}\n:::\n:::\n\n\n*Diabetes tends to be more prevalent in older age categories, among respondents with worse self-reported general health, and potentially among those with lower income and education levels. These patterns suggest that demographic and socio-economic variables may add predictive power.*\n\n------------------------------------------------------------------------\n\n## Correlation Among Numeric Predictors\n\nFinally, we examine the correlation structure among numeric predictors and the diabetes indicator (using the numeric version `Diabetes_num` and `Age_num`).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnumeric_for_cor <- vars_of_interest |>\n  select(Diabetes_num, BMI, MentHlth, PhysHlth, Age_num, Education, Income)\n\ncor_mat <- cor(numeric_for_cor, use = \"pairwise.complete.obs\")\n\nround(cor_mat, 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n             Diabetes_num   BMI MentHlth PhysHlth Age_num Education Income\nDiabetes_num         1.00  0.22     0.07     0.18    0.19     -0.13  -0.17\nBMI                  0.22  1.00     0.09     0.12   -0.04     -0.10  -0.10\nMentHlth             0.07  0.09     1.00     0.35   -0.09     -0.10  -0.21\nPhysHlth             0.18  0.12     0.35     1.00    0.10     -0.16  -0.27\nAge_num              0.19 -0.04    -0.09     0.10    1.00     -0.10  -0.13\nEducation           -0.13 -0.10    -0.10    -0.16   -0.10      1.00   0.45\nIncome              -0.17 -0.10    -0.21    -0.27   -0.13      0.45   1.00\n```\n\n\n:::\n:::\n\n\nWe also visualize this correlation matrix using `GGally::ggcorr()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggcorr(\n  numeric_for_cor,\n  label = TRUE,\n  label_round = 2,\n  label_size = 3\n) +\n  labs(\n    title = \"Correlation Matrix for Selected Numeric Predictors\"\n  )\n```\n\n::: {.cell-output-display}\n![](EDA_files/figure-html/corr-plot-1.png){width=672}\n:::\n:::\n\n\n*The correlation matrix highlights the relationships among BMI, age, health days, and diabetes status. While no single predictor is perfectly correlated with diabetes, several variables show moderate associations that justify their inclusion in the modeling step.*\n\n------------------------------------------------------------------------\n\n## Summary and Next Steps\n\nIn this EDA, we:\n\n-   Described the structure of the Diabetes Health Indicators dataset.\n-   Explored the marginal distribution of the multi-level diabetes indicator (`Diabetes_012`).\n-   Examined key numeric, binary, and ordinal predictors and their relationships with diabetes status.\n-   Identified variables that appear strongly associated with diabetes, including high blood pressure, high cholesterol, BMI, physical activity, difficulty walking, and general health, as well as age and income.\n\nThese insights will guide the construction of predictive models in the next stage, where we will fit and compare a **classification tree** and a **random forest** using the tidymodels framework, with model performance evaluated via **log-loss** on a held-out test set.\n\n[Click here for the Modeling Page](Modeling.html)\n",
    "supporting": [
      "EDA_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}